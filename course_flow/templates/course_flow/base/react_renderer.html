<script nonce="{{ request.csp_nonce }}">

  cf.path_id = "{{ path_id }}";
  const DTOContextData = {{ contextData | safe }};
  let contextData
  let makeActiveSidebarID = null


  switch (cf.path_id) {
    case 'projectDetail': {

      cf.contextData = DTOContextData
      {% if object %}
        window.create_path_this_project = {
          activity: "{% url 'course_flow:activity-create' projectPk=object.pk %}",
          course: "{% url 'course_flow:course-create' projectPk=object.pk %}",
          program: "{% url 'course_flow:program-create' projectPk=object.pk %}"
        }
      {% endif %}
      makeActiveSidebarID = "#project" + contextData.project_data.id
      break;
    }
    case 'favorites': {
      cf.contextData = DTOContextData
      makeActiveSidebarID = "#my-favourites"
      break;
    }
    case 'library': {
      cf.contextData = DTOContextData
      makeActiveSidebarID = '#panel-my-library'
      break;
    }

    case 'home': {
      cf.contextData = DTOContextData
      makeActiveSidebarID = '#panel-home'
      break;
    }


    case 'explore': {
      cf.contextData = DTOContextData
      makeActiveSidebarID = "#panel-explore"
      break;
    }
    /*******************************************************
     * REDUX STUFF
     *******************************************************/
    case 'projectComparison': {
      //  @todo these don't seem to be used
      {% if object %}
      // window.workflow_paths = {
      //  activity: '{% url "course_flow:workflow-update" pk=object.pk %}',
      //  course: '{% url "course_flow:workflow-update" pk=object.pk %}',
      //  program: '{% url "course_flow:workflow-update" pk=object.pk %}',
      //   workflow: '{% url "course_flow:workflow-update" pk=object.pk %}',
      // }
      {% endif  %}
      cf.contextData = DTOContextData
      break;
    }
    case "my_live_projects": {
      cf.contextData = DTOContextData
      makeActiveSidebarID = "#panel-my-live-projects"
      break;
    }
    case "workflowDetailView": {
      cf.contextData = DTOContextData
      makeActiveSidebarID = '#workflow' + contextData.workflow_model_id
      break;
    }
  }

  window.addEventListener("load", function () {
    $(document).ajaxError(window.fail_function);
    makeActiveSidebarID && makeActiveSidebar(makeActiveSidebarID)
  });


</script>
