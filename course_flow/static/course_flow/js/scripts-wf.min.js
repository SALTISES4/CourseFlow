var workflow=function(t){"use strict";var e,n,o,r,l,s={},i=[],_=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i;function u(t,e){for(var n in e)t[n]=e[n];return t}function c(t){var e=t.parentNode;e&&e.removeChild(t)}function a(t,e,n){var o,r,l,s=arguments,i={};for(l in e)"key"==l?o=e[l]:"ref"==l?r=e[l]:i[l]=e[l];if(arguments.length>3)for(n=[n],l=3;l<arguments.length;l++)n.push(s[l]);if(null!=n&&(i.children=n),"function"==typeof t&&null!=t.defaultProps)for(l in t.defaultProps)void 0===i[l]&&(i[l]=t.defaultProps[l]);return p(t,i,o,r,null)}function p(t,n,o,r,l){var s={type:t,props:n,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:l};return null==l&&(s.__v=s),null!=e.vnode&&e.vnode(s),s}function d(t){return t.children}function f(t,e){this.props=t,this.context=e}function h(t,e){if(null==e)return t.__?h(t.__,t.__.__k.indexOf(t)+1):null;for(var n;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e)return n.__e;return"function"==typeof t.type?h(t):null}function y(t){var e,n;if(null!=(t=t.__)&&null!=t.__c){for(t.__e=t.__c.base=null,e=0;e<t.__k.length;e++)if(null!=(n=t.__k[e])&&null!=n.__e){t.__e=t.__c.base=n.__e;break}return y(t)}}function v(t){(!t.__d&&(t.__d=!0)&&n.push(t)&&!m.__r++||r!==e.debounceRendering)&&((r=e.debounceRendering)||o)(m)}function m(){for(var t;m.__r=n.length;)t=n.sort((function(t,e){return t.__v.__b-e.__v.__b})),n=[],t.some((function(t){var e,n,o,r,l,s,i;t.__d&&(s=(l=(e=t).__v).__e,(i=e.__P)&&(n=[],(o=u({},l)).__v=o,r=N(i,l,o,e.__n,void 0!==i.ownerSVGElement,null,n,null==s?h(l):s),T(n,l),r!=s&&y(l)))}))}function g(t,e,n,o,r,l,_,u,a,f){var y,v,m,g,k,w,x,S=o&&o.__k||i,T=S.length;for(a==s&&(a=null!=_?_[0]:T?h(o,0):null),n.__k=[],y=0;y<e.length;y++)if(null!=(g=n.__k[y]=null==(g=e[y])||"boolean"==typeof g?null:"string"==typeof g||"number"==typeof g?p(null,g,null,null,g):Array.isArray(g)?p(d,{children:g},null,null,null):null!=g.__e||null!=g.__c?p(g.type,g.props,g.key,null,g.__v):g)){if(g.__=n,g.__b=n.__b+1,null===(m=S[y])||m&&g.key==m.key&&g.type===m.type)S[y]=void 0;else for(v=0;v<T;v++){if((m=S[v])&&g.key==m.key&&g.type===m.type){S[v]=void 0;break}m=null}k=N(t,g,m=m||s,r,l,_,u,a,f),(v=g.ref)&&m.ref!=v&&(x||(x=[]),m.ref&&x.push(m.ref,null,g),x.push(v,g.__c||k,g)),null!=k?(null==w&&(w=k),a=b(t,g,m,S,_,k,a),f||"option"!=n.type?"function"==typeof n.type&&(n.__d=a):t.value=""):a&&m.__e==a&&a.parentNode!=t&&(a=h(m))}if(n.__e=w,null!=_&&"function"!=typeof n.type)for(y=_.length;y--;)null!=_[y]&&c(_[y]);for(y=T;y--;)null!=S[y]&&C(S[y],S[y]);if(x)for(y=0;y<x.length;y++)j(x[y],x[++y],x[++y])}function b(t,e,n,o,r,l,s){var i,_,u;if(void 0!==e.__d)i=e.__d,e.__d=void 0;else if(r==n||l!=s||null==l.parentNode)t:if(null==s||s.parentNode!==t)t.appendChild(l),i=null;else{for(_=s,u=0;(_=_.nextSibling)&&u<o.length;u+=2)if(_==l)break t;t.insertBefore(l,s),i=s}return void 0!==i?i:l.nextSibling}function k(t,e,n){"-"===e[0]?t.setProperty(e,n):t[e]=null==n?"":"number"!=typeof n||_.test(e)?n:n+"px"}function w(t,e,n,o,r){var l,s;if(r&&"className"==e&&(e="class"),"style"===e)if("string"==typeof n)t.style=n;else{if("string"==typeof o&&(t.style=o=""),o)for(e in o)n&&e in n||k(t.style,e,"");if(n)for(e in n)o&&n[e]===o[e]||k(t.style,e,n[e])}else"o"===e[0]&&"n"===e[1]?(l=e!==(e=e.replace(/Capture$/,"")),(s=e.toLowerCase())in t&&(e=s),e=e.slice(2),t.l||(t.l={}),t.l[e]=n,n?o||t.addEventListener(e,x,l):t.removeEventListener(e,x,l)):"list"!==e&&"tagName"!==e&&"form"!==e&&"type"!==e&&"size"!==e&&"download"!==e&&"href"!==e&&!r&&e in t?t[e]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==e&&(e!==(e=e.replace(/xlink:?/,""))?null==n||!1===n?t.removeAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase()):t.setAttributeNS("http://www.w3.org/1999/xlink",e.toLowerCase(),n):null==n||!1===n&&!/^ar/.test(e)?t.removeAttribute(e):t.setAttribute(e,n))}function x(t){this.l[t.type](e.event?e.event(t):t)}function S(t,e,n){var o,r;for(o=0;o<t.__k.length;o++)(r=t.__k[o])&&(r.__=t,r.__e&&("function"==typeof r.type&&r.__k.length>1&&S(r,e,n),e=b(n,r,r,t.__k,null,r.__e,e),"function"==typeof t.type&&(t.__d=e)))}function N(t,n,o,r,l,s,i,_,c){var a,p,h,y,v,m,b,k,w,x,N,T=n.type;if(void 0!==n.constructor)return null;(a=e.__b)&&a(n);try{t:if("function"==typeof T){if(k=n.props,w=(a=T.contextType)&&r[a.__c],x=a?w?w.props.value:a.__:r,o.__c?b=(p=n.__c=o.__c).__=p.__E:("prototype"in T&&T.prototype.render?n.__c=p=new T(k,x):(n.__c=p=new f(k,x),p.constructor=T,p.render=U),w&&w.sub(p),p.props=k,p.state||(p.state={}),p.context=x,p.__n=r,h=p.__d=!0,p.__h=[]),null==p.__s&&(p.__s=p.state),null!=T.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=u({},p.__s)),u(p.__s,T.getDerivedStateFromProps(k,p.__s))),y=p.props,v=p.state,h)null==T.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==T.getDerivedStateFromProps&&k!==y&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(k,x),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(k,p.__s,x)||n.__v===o.__v){p.props=k,p.state=p.__s,n.__v!==o.__v&&(p.__d=!1),p.__v=n,n.__e=o.__e,n.__k=o.__k,p.__h.length&&i.push(p),S(n,_,t);break t}null!=p.componentWillUpdate&&p.componentWillUpdate(k,p.__s,x),null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(y,v,m)}))}p.context=x,p.props=k,p.state=p.__s,(a=e.__r)&&a(n),p.__d=!1,p.__v=n,p.__P=t,a=p.render(p.props,p.state,p.context),p.state=p.__s,null!=p.getChildContext&&(r=u(u({},r),p.getChildContext())),h||null==p.getSnapshotBeforeUpdate||(m=p.getSnapshotBeforeUpdate(y,v)),N=null!=a&&a.type==d&&null==a.key?a.props.children:a,g(t,Array.isArray(N)?N:[N],n,o,r,l,s,i,_,c),p.base=n.__e,p.__h.length&&i.push(p),b&&(p.__E=p.__=null),p.__e=!1}else null==s&&n.__v===o.__v?(n.__k=o.__k,n.__e=o.__e):n.__e=D(o.__e,n,o,r,l,s,i,c);(a=e.diffed)&&a(n)}catch(t){n.__v=null,e.__e(t,n,o)}return n.__e}function T(t,n){e.__c&&e.__c(n,t),t.some((function(n){try{t=n.__h,n.__h=[],t.some((function(t){t.call(n)}))}catch(t){e.__e(t,n.__v)}}))}function D(t,e,n,o,r,l,_,u){var c,a,p,d,f,h=n.props,y=e.props;if(r="svg"===e.type||r,null!=l)for(c=0;c<l.length;c++)if(null!=(a=l[c])&&((null===e.type?3===a.nodeType:a.localName===e.type)||t==a)){t=a,l[c]=null;break}if(null==t){if(null===e.type)return document.createTextNode(y);t=r?document.createElementNS("http://www.w3.org/2000/svg",e.type):document.createElement(e.type,y.is&&{is:y.is}),l=null,u=!1}if(null===e.type)h!==y&&t.data!==y&&(t.data=y);else{if(null!=l&&(l=i.slice.call(t.childNodes)),p=(h=n.props||s).dangerouslySetInnerHTML,d=y.dangerouslySetInnerHTML,!u){if(null!=l)for(h={},f=0;f<t.attributes.length;f++)h[t.attributes[f].name]=t.attributes[f].value;(d||p)&&(d&&p&&d.__html==p.__html||(t.innerHTML=d&&d.__html||""))}(function(t,e,n,o,r){var l;for(l in n)"children"===l||"key"===l||l in e||w(t,l,null,n[l],o);for(l in e)r&&"function"!=typeof e[l]||"children"===l||"key"===l||"value"===l||"checked"===l||n[l]===e[l]||w(t,l,e[l],n[l],o)})(t,y,h,r,u),d?e.__k=[]:(c=e.props.children,g(t,Array.isArray(c)?c:[c],e,n,o,"foreignObject"!==e.type&&r,l,_,s,u)),u||("value"in y&&void 0!==(c=y.value)&&c!==t.value&&w(t,"value",c,h.value,!1),"checked"in y&&void 0!==(c=y.checked)&&c!==t.checked&&w(t,"checked",c,h.checked,!1))}return t}function j(t,n,o){try{"function"==typeof t?t(n):t.current=n}catch(t){e.__e(t,o)}}function C(t,n,o){var r,l,s;if(e.unmount&&e.unmount(t),(r=t.ref)&&(r.current&&r.current!==t.__e||j(r,null,n)),o||"function"==typeof t.type||(o=null!=(l=t.__e)),t.__e=t.__d=void 0,null!=(r=t.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(t){e.__e(t,n)}r.base=r.__P=null}if(r=t.__k)for(s=0;s<r.length;s++)r[s]&&C(r[s],n,o);null!=l&&c(l)}function U(t,e,n){return this.constructor(t,n)}e={__e:function(t,e){for(var n,o;e=e.__;)if((n=e.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(o=!0,n.setState(n.constructor.getDerivedStateFromError(t))),null!=n.componentDidCatch&&(o=!0,n.componentDidCatch(t)),o)return v(n.__E=n)}catch(e){t=e}throw t}},f.prototype.setState=function(t,e){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=u({},this.state),"function"==typeof t&&(t=t(u({},n),this.props)),t&&u(n,t),null!=t&&this.__v&&(e&&this.__h.push(e),v(this))},f.prototype.forceUpdate=function(t){this.__v&&(this.__e=!0,t&&this.__h.push(t),v(this))},f.prototype.render=d,n=[],o="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,m.__r=0,l=s;class P extends f{constructor(t){super(t),console.log(t)}componentDidMount(){var t=this.setState.bind(this);$.getJSON("/"+this.objectType+"/read/"+this.props.objectID,(function(e){t(e)}))}setJSON(t,e){var n={};n[t]=e,console.log(this),this.setState(n,()=>updateValue(this.props.objectID,this.objectType,this.state))}}function E(t){return a("p",null,t.text)}class I extends f{constructor(t){super(t),this.updateText=this.updateText.bind(this)}render(){return a("input",{value:this.props.text,onBlur:this.updateText})}updateText(t){this.props.textUpdated(t.target.value)}}class W extends P{constructor(t){super(t),this.objectType="node"}render(){if(this.state.id)return a("div",{class:"node"},a(I,{text:this.state.title,textUpdated:this.setJSON.bind(this,"title")}),a(I,{text:this.state.description,textUpdated:this.setJSON.bind(this,"description")}))}}class O extends P{constructor(t){super(t),this.objectType="nodestrategy"}render(){if(this.state.id)return a(W,{objectID:this.state.node})}}class V extends P{constructor(t){super(t),this.objectType="strategy"}render(){if(this.state.id){var t=this.state.nodestrategy_set.map(t=>a(O,{objectID:t}));return a("div",{class:"strategy"},a(I,{text:this.state.title,textUpdated:this.setJSON.bind(this,"title")}),a(I,{text:this.state.description,textUpdated:this.setJSON.bind(this,"description")}),a("div",null,t))}}}class A extends P{constructor(t){super(t),this.objectType="column"}render(){if(this.state.id)return a("div",{class:"column"},this.state.title)}}class J extends P{constructor(t){super(t),this.objectType="columnworkflow"}render(){if(this.state.id)return a(A,{objectID:this.state.column})}}class L extends P{constructor(t){super(t),this.objectType="strategyworkflow"}render(){if(console.log(this.state),this.state.id)return a(V,{objectID:this.state.strategy})}}class M extends P{constructor(t){super(t),this.objectType="course"}render(){if(console.log(this.state),this.state.id){var t=this.state.columnworkflow_set.map(t=>a(J,{objectID:t})),e=this.state.strategyworkflow_set.map(t=>a(L,{objectID:t}));return a("div",{id:"workflow-wrapper",class:"workflow-wrapper"},a("div",{class:"workflow-container"},a(I,{text:this.state.title,textUpdated:this.setJSON.bind(this,"title")}),a(E,{text:"Created by "+this.state.author}),a(I,{text:this.state.description,textUpdated:this.setJSON.bind(this,"description")}),a("div",{class:"column-row"},t),a("div",{class:"strategy-block"},e)))}}}return t.ClickEditText=I,t.ColumnView=A,t.ColumnWorkflowView=J,t.ComponentJSON=P,t.NodeStrategyView=O,t.NodeView=W,t.StrategyView=V,t.StrategyWorkflowView=L,t.Text=E,t.WorkflowView=M,t.renderWorkflowView=function(t,n){console.log(t),function(t,n,o){var r,_,u;e.__&&e.__(t,n),_=(r=o===l)?null:o&&o.__k||n.__k,t=a(d,null,[t]),u=[],N(n,(r?n:o||n).__k=t,_||s,s,void 0!==n.ownerSVGElement,o&&!r?[o]:_?null:n.childNodes.length?i.slice.call(n.childNodes):null,u,o||s,r),T(u,t)}(a(M,{objectID:t.id}),n)},t}({});
